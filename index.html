<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        .menu-hidden {
            transform: translateX(-100%);
        }
        .menu-visible {
            transform: translateX(0);
        }
        .download-button {
            transition: background-color 0.3s ease;
        }
        .download-button:active {
            background-color: black;
        }
        .disabled-button {
            background-color: gray;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Sidebar Menu -->
    <div id="sidebarMenu" class="fixed top-0 left-0 w-64 h-full bg-blue-500 text-white p-4 transition-transform duration-300 menu-hidden z-20">
        <ul>
            <li class="py-2"><a href="#" class="text-white" onclick="navigateTo('index.html')">Home</a></li>
            <li class="py-2"><a href="#" class="text-white" onclick="navigateTo('index2.html')">About</a></li>
            <li class="py-2"><a href="#" class="text-white" onclick="navigateTo('index3.html')">Services</a></li>
            <li class="py-2"><a href="#" class="text-white" onclick="navigateTo('index4.html')">Contact</a></li>
        </ul>
    </div>

    <!-- Overlay -->
    <div id="overlay" class="fixed inset-0 bg-black opacity-50 hidden z-10" onclick="toggleMenu()"></div>

    <!-- Header -->
    <div class="bg-blue-500 p-2 flex items-center justify-between fixed top-0 left-0 w-full z-30">
        <i class="fas fa-bars text-white text-xl cursor-pointer" onclick="toggleMenu()"></i>
        <h1 class="text-white text-xl font-bold">MeledakTik</h1>
        <div></div>
    </div>

    <!-- Main Content -->
    <div class="p-4 mt-12">
        <!-- Gradient Bar with Input -->
        <div class="bg-gradient-to-r from-yellow-400 to-red-500 h-10 flex items-center justify-between p-2 rounded-md">
            <input id="videoLink" type="text" placeholder="Paste TikTok video link here" class="bg-transparent text-white placeholder-white flex-grow outline-none px-2">
            <i class="fas fa-copy text-white text-lg cursor-pointer" onclick="pasteLink()"></i>
        </div>

        <!-- Download Button -->
        <div class="mt-4">
            <button id="downloadButton" onclick="handleDownload()" class="download-button bg-blue-500 text-white text-lg font-bold py-2 px-4 rounded-md w-full">DOWNLOAD</button>
        </div>

        <!-- Placeholder for additional content -->
        <div id="content" class="mt-4 bg-gray-300 p-4 flex flex-col items-center justify-center rounded-md w-full">
            <!-- Dynamic content will be loaded here -->
        </div>

        <!-- Description -->
        <div class="mt-4 p-4 bg-white rounded-md shadow-md">
            <h2 class="text-2xl font-bold mb-2">MeledakTik - TikTok Downloader</h2>
            <p>MeledakTik adalah alat unduhan TikTok yang memungkinkan Anda mengunduh video TikTok dengan mudah dan cepat. Dengan MeledakTik, Anda dapat mengunduh video TikTok dalam berbagai format, termasuk video HD, video dengan watermark, dan musik. Cukup tempelkan tautan video TikTok ke dalam kotak di atas, klik tombol unduh, dan pilih format yang Anda inginkan. Nikmati video TikTok favorit Anda kapan saja dan di mana saja tanpa koneksi internet!</p>
        </div>
    </div>

    <script>
        function toggleMenu() {
            const sidebarMenu = document.getElementById('sidebarMenu');
            const overlay = document.getElementById('overlay');
            if (sidebarMenu.classList.contains('menu-hidden')) {
                sidebarMenu.classList.remove('menu-hidden');
                sidebarMenu.classList.add('menu-visible');
                overlay.classList.remove('hidden');
            } else {
                sidebarMenu.classList.remove('menu-visible');
                sidebarMenu.classList.add('menu-hidden');
                overlay.classList.add('hidden');
            }
        }

        async function pasteLink() {
            try {
                const text = await navigator.clipboard.readText();
                document.getElementById('videoLink').value = text;
            } catch (err) {
                alert('Failed to read clipboard contents: ' + err);
            }
        }

        async function handleDownload() {
            disableDownloadButton();
            const link = document.getElementById('videoLink').value;
            if (link) {
                try {
                    const response = await fetch(`https://api.tiklydown.eu.org/api/download/v2?url=${encodeURIComponent(link)}`);
                    const data = await response.json();
                    if (data.status === 200) {
                        const videoUrl = data.result.video1;
                        const videoHdUrl = data.result.video_hd;
                        const videoWatermarkUrl = data.result.video_watermark;
                        const musicUrl = data.result.music;
                        const content = document.getElementById('content');
                        content.innerHTML = `
                            <div class="text-center w-full">
                                <img src="${data.result.author.avatar}" alt="Author Avatar" class="w-16 h-16 rounded-full mx-auto">
                                <p class="mt-2 font-bold">${data.result.author.nickname}</p>
                                <p class="mt-1">${data.result.desc}</p>
                                <video controls class="w-full mx-auto mt-4">
                                    <source src="${videoUrl}" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <a href="${videoUrl}" download class="download-button bg-blue-500 text-white text-lg font-bold py-2 px-4 rounded-md mt-4 inline-block w-full">Download Video</a>
                                <a href="${videoHdUrl}" download class="download-button bg-blue-500 text-white text-lg font-bold py-2 px-4 rounded-md mt-4 inline-block w-full">Download Video HD</a>
                                <a href="${videoWatermarkUrl}" download class="download-button bg-blue-500 text-white text-lg font-bold py-2 px-4 rounded-md mt-4 inline-block w-full">Download Video WM</a>
                                <a href="${musicUrl}" download class="download-button bg-blue-500 text-white text-lg font-bold py-2 px-4 rounded-md mt-4 inline-block w-full">Download Music</a>
                            </div>
                        `;
                    } else {
                        alert('Failed to fetch video details.');
                    }
                } catch (error) {
                    alert('Error fetching video details: ' + error);
                }
            } else {
                alert('Please paste a TikTok video link.');
            }
        }

        function disableDownloadButton() {
            const downloadButton = document.getElementById('downloadButton');
            downloadButton.disabled = true;
            downloadButton.classList.add('disabled-button');
            let countdown = 10;
            const interval = setInterval(() => {
                downloadButton.textContent = `Wait ${countdown} seconds`;
                countdown--;
                if (countdown < 0) {
                    clearInterval(interval);
                    downloadButton.disabled = false;
                    downloadButton.classList.remove('disabled-button');
                    downloadButton.textContent = 'DOWNLOAD';
                }
            }, 1000);
        }

        function navigateTo(page) {
            window.location.href = page;
        }
    </script>
</body>
</html>